Кредитный модуль Conpay.ru для UMI.CMS
======================================

## Установка

Установка модуля проводится по стандартному для UMI алгоритму. Но для начала установки необходимо сопировать файлы модуля в необходимые директории.

Папку `conpay` скопируйте в `/classes/modules/`.
Файлы из папок `/images/big/`, `/images/medium/`, `/images/small/` скопируйте в поддиректории big, medium и small директории `/images/cms/admin/mac/icons`

Авторизуйтесь в UMI.CMS под пользователем, имеющим права на установку модулей и правку прав пользователей.

После авторизации перейдите в модуль «Конфигурация». Выберите вкладку «Модули» и в строке установки модуля наберите путь до установочного файла `/classes/modules/conpay/install.php` и нажмите «Установить»

Готово! Модуль установлен в систему. Теперь необходимо внести изменения в шаблоны вашего сайта и установить кнопку «Купить в Кредит» в нужное место на сайте. Все сайты индивидуальны и, к сожалению, дать точного описания нельзя.

Откройте контентный шаблон, который используется для вывода внутренних страниц (обычно `/tpls/content/inner.tpl`) и вставьте в любое место в заголовочной части (внутрь `<head>`) макрос
```%conpay insertButtonForBasket()%```

Откройте шаблон вывода списка товаров на сайте (допустим `/tpls/catalog/default.tpl`) и найдите место, где выводится кнопка «Добавить в корзину». Рядом с кодом кнопки разместите макрос
```%conpay insertButton(%id%)%```

Далее нужно найти шаблон, по которому выводится корзина товаров. Обычно он располагается в папке `/tpls/emarkrt/` в блоке `order_block`. Вставьте рядом с кнопкой «Оформить заказ» макрос
```%conpay insertButtonForBasket()%```

На этом этапе интеграция окончена. Осталось только оформить кнопки при помощи CSS.

## Расширенное описание макросов

```%conpay insertButtonForBasket(container_id = '')%```
Выводит кнопку «Купить в кредит» перечисляя все товары. Используется для Корзины товаров.
- container_id — значение атрибута id HTML элемента, который будет служить контейнером. Если не указан выведет кнопку в месте втавки макроса.

```%insertButton(item_id, quantity = 1, container_id = '', name_prefix = '')%```
Выводит кнопку «Купить в кредит» для товара.
- item_id — обязательный параметр, id элемента товарп
- quantity — количество товара, по умолчанию 1
- container_id — значение атрибута id HTML элемента, который будет служить контейнером. Если не указан выведет кнопку в месте вставки макроса.
- name_prefix — префикс, приписываемый к началу названия товра, может служить для указания раздела товра или его группы по умолчанию пуст.

```%conpay getJScript()%```
Подключает библиотеки conpay и инициализирует их. Рекомендуется в ставлять в блок `<head>`
